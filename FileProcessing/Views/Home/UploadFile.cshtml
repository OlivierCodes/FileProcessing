<head>
    <link rel="stylesheet" href="~/css/site.css" />
</head>


<form id="fileForm" method="post" enctype="multipart/form-data">
    <input type="file" name="file" id="fileInput"/>
    <button type="submit" asp-controller="Home" asp-action="UploadFile">Upload</button>
</form>

<div id="errorMessage" style="color:red; display: none;"></div>

<div id="progress-container" style="width: 100%; background-color: #f3f3f3;">
    <div id="progress-bar" style="width: 0%; height: 30px; background-color: #4CAF50;"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.0/signalr.min.js"></script>
<script type="text/javascript">
    const connection = new signalR.HubConnectionBuilder().withUrl("/fileProcessingHub").buid();

    connection.on("ReceiveProgress", function (progress) {
        document.getElementById("progress-bar").style.width = progress + "%";
    });

    connection.start().catch(function (err){
        return console.error(err.toString());
    });

</script>

